{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/modules/js/mixin.js","webpack:///./src/pages/cart/cart.js"],"names":["url","hotLists","banner","topList","subList","rank","searchList","details","deal","cartAdd","cartRemove","cartMremove","cartReduce","cartLists","cartUpdate","addressLists","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","__webpack_exports__","filters","formatPrice","value","arr","split","indexOf","index","slice","push","join","__WEBPACK_IMPORTED_MODULE_3_vue__","el","data","list","isEditing","editingMsg","total","editingShop","editingShopIndex","removePopup","removeMsg","computed","allSelected","get","this","length","every","shop","checked","set","newVal","forEach","goodsList","good","allRemoveSelected","removeChecked","selectLists","price","number","removeLists","created","getlist","methods","_this","__WEBPACK_IMPORTED_MODULE_4_axios___default","a","post","__WEBPACK_IMPORTED_MODULE_5_js_api_js__","then","res","cartList","goods","editShop","shopIndex","selectGoods","attr","selectShop","selectAll","addGoods","id","reduceGoods","removeGoods","goodsIndex","removeData","removeList","removeConfirm","_this2","_removeData","splice","fetch","removeShop","ids","findIndex","item","lists","editing","mixins","__WEBPACK_IMPORTED_MODULE_6_js_mixin_js__"],"mappings":"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","file":"static/js/cart.fd2a066934194042cbf5.js","sourcesContent":["let url = {\r\n\thotLists: '/index/hotLists',\r\n\tbanner: '/index/banner',\r\n\ttopList: '/category/topList',\r\n\tsubList: '/category/subList',\r\n\trank: '/category/rank',\r\n\tsearchList: '/search/list',\r\n\tdetails: '/goods/details',\r\n\tdeal: '/goods/deal',\r\n\tcartAdd: '/cart/add',\r\n\tcartRemove: '/cart/remove',\r\n\tcartMremove: '/cart/mremove',\r\n\tcartReduce: '/cart/reduce',\r\n\tcartLists: '/cart/list',\r\n\tcartUpdate: '/cart/update',\r\n\taddressLists: '/address/list',\r\n\taddressAdd: '/address/add',\r\n\taddressRemove: '/address/remove',\r\n\taddressUpdate: '/address/update',\r\n\taddressSetDefault: '/address/setDefault'\r\n}\r\n\r\nlet host = 'http://rap2api.taobao.org/app/mock/7058' \r\n\r\nfor(let key in url){\r\n\tif(url.hasOwnProperty(key)){\r\n\t\turl[key] = host + url[key]\r\n\t}\r\n}\r\n\r\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","let mixin = {\r\n\tfilters: {\r\n\t\tformatPrice(value){\r\n\t\t\tlet arr = (value + '').split('')\r\n\t\t\tif(arr.indexOf('.')>-1){\r\n\t\t\t\tlet index = arr.indexOf('.')\r\n\t\t\t\tarr = arr.slice(0,index + 2)\r\n\t\t\t\tarr.push('0')\r\n\t\t\t}else{\r\n\t\t\t\tarr.push('.00')\r\n\t\t\t}\r\n\t\t\treturn arr.join('')\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default mixin\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import './cart.css'\r\nimport './cart_base.css'\r\nimport './cart_trade.css'\r\n\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport url from 'js/api.js'\r\nimport mixin from 'js/mixin.js'\r\nimport qs from 'qs'\r\n\r\nnew Vue({\r\n\tel: '#app',\r\n\tdata: {\r\n\t\tlist: null,\r\n\t\tisEditing: false,\r\n\t\teditingMsg: '编辑',\r\n\t\ttotal: 0,\r\n\t\teditingShop: null,\r\n\t\teditingShopIndex: -1,\r\n\t\tremovePopup: false,\r\n\t\tremoveMsg: 'x'\r\n\t},\r\n\tcomputed: {\r\n\t\tallSelected: {\r\n\t\t\tget() {\r\n\t\t\t\tif (this.list && this.list.length) {\r\n\t\t\t\t\treturn this.list.every(shop => {\r\n\t\t\t\t\t\treturn shop.checked\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t},\r\n\t\t\tset(newVal) {\r\n\t\t\t\tthis.list.forEach(shop => {\r\n\t\t\t\t\tshop.checked = newVal\r\n\t\t\t\t\tshop.goodsList.forEach(good => {\r\n\t\t\t\t\t\tgood.checked = newVal\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tallRemoveSelected: {\r\n\t\t\tget() {\r\n\t\t\t\tif (this.editingShop) {\r\n\t\t\t\t\treturn this.editingShop.removeChecked\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t},\r\n\t\t\tset(newVal) {\r\n\t\t\t\tif (this.editingShop) {\r\n\t\t\t\t\tthis.editingShop.removeChecked = newVal\r\n\t\t\t\t\tthis.editingShop.goodsList.forEach(good => {\r\n\t\t\t\t\t\tgood.removeChecked = newVal\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectLists() {\r\n\t\t\tif (this.list && this.list.length) {\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tlet total = 0\r\n\t\t\t\tthis.list.forEach(shop => {\r\n\t\t\t\t\tshop.goodsList.forEach(good => {\r\n\t\t\t\t\t\tif (good.checked) {\r\n\t\t\t\t\t\t\tarr.push(good)\r\n\t\t\t\t\t\t\ttotal += good.price * good.number\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tthis.total = total\r\n\t\t\t\treturn arr\r\n\t\t\t}\r\n\t\t\treturn []\r\n\t\t},\r\n\t\tremoveLists() {\r\n\t\t\tif (this.editingShop) {\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tthis.editingShop.goodsList.forEach(good => {\r\n\t\t\t\t\tif (good.removeChecked) {\r\n\t\t\t\t\t\tarr.push(good)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn arr\r\n\t\t\t}\r\n\t\t\treturn []\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getlist()\r\n\t},\r\n\tmethods: {\r\n\t\tgetlist() {\r\n\t\t\taxios.post(url.cartLists).then(res => {\r\n\t\t\t\tlet list = res.data.cartList\r\n\t\t\t\tlist.forEach(shop => {\r\n\t\t\t\t\tshop.checked = true\r\n\t\t\t\t\tshop.removeChecked = false\r\n\t\t\t\t\tshop.isEditing = false\r\n\t\t\t\t\tshop.editingMsg = '编辑'\r\n\t\t\t\t\tshop.goodsList.forEach(goods => {\r\n\t\t\t\t\t\tgoods.checked = true\r\n\t\t\t\t\t\tgoods.removeChecked = false\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tthis.list = list\r\n\t\t\t})\r\n\t\t},\r\n\t\teditShop(shop, shopIndex) {\r\n\t\t\tshop.isEditing = !shop.isEditing\r\n\t\t\tshop.editingMsg = shop.isEditing ? '完成' : '编辑'\r\n\t\t\tthis.list.forEach((shop, index) => {\r\n\t\t\t\tif (index !== shopIndex) {\r\n\t\t\t\t\tshop.isEditing = false\r\n\t\t\t\t\tshop.editingMsg = shop.isEditing ? '' : '编辑'\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.editingShop = shop.isEditing ? shop : null\r\n\t\t\tthis.editingShopIndex = shop.isEditing ? shopIndex : -1\r\n\t\t},\r\n\t\tselectGoods(shop, goods) {\r\n\t\t\tlet attr = this.editingShop ? 'removeChecked' : 'checked'\r\n\t\t\tgoods[attr] = !goods[attr]\r\n\t\t\tshop[attr] = shop.goodsList.every(goods => {\r\n\t\t\t\treturn goods[attr]\r\n\t\t\t})\r\n\t\t},\r\n\t\tselectShop(shop) {\r\n\t\t\tlet attr = this.editingShop ? 'removeChecked' : 'checked'\r\n\t\t\tshop[attr] = !shop[attr]\r\n\t\t\tshop.goodsList.forEach(goods => {\r\n\t\t\t\tgoods[attr] = shop[attr]\r\n\t\t\t})\r\n\t\t},\r\n\t\tselectAll() {\r\n\t\t\tlet attr = this.editingShop ? 'allRemoveSelected' : 'allSelected'\r\n\t\t\tthis[attr] = !this[attr]\r\n\t\t},\r\n\t\taddGoods(goods) {\r\n\t\t\taxios.post(url.cartAdd, {\r\n\t\t\t\tid: goods.id,\r\n\t\t\t\tnumber: 1\r\n\t\t\t}).then(res => {\r\n\t\t\t\tgoods.number++\r\n\t\t\t})\r\n\t\t},\r\n\t\treduceGoods(goods) {\r\n\t\t\tif (goods.number === 1) return\r\n\t\t\taxios.post(url.cartReduce, {\r\n\t\t\t\tid: goods.id,\r\n\t\t\t\tnumber: 1\r\n\t\t\t}).then(res => {\r\n\t\t\t\tgoods.number--\r\n\t\t\t})\r\n\t\t},\r\n\t\tremoveGoods(goods,goodsIndex,shop,shopIndex) {\r\n\t\t\tthis.removePopup = true\r\n\t\t\tthis.removeData = {goods,goodsIndex,shop,shopIndex}\r\n\t\t\tthis.removeMsg = '确定移除该商品吗？'\r\n\t\t},\r\n\t\tremoveList() {\r\n\t\t\tthis.removePopup = true\r\n\t\t\tthis.removeMsg = `确定将所选 ${this.removeLists.length} 个商品删除？`\r\n\t\t},\r\n\t\tremoveConfirm(){\r\n\t\t\tif (this.removeMsg === '确定移除该商品吗？'){\r\n\t\t\t\tlet {goods,goodsIndex,shop,shopIndex} = this.removeData\r\n\t\t\t\tthis.list[shopIndex].goodsList.splice(goodsIndex,1)\r\n\t\t\t\tfetch(url.cartRemove, {id: goods.id})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tshop.goodsList.splice(goodsIndex, 1)\r\n\t\t\t\t\tif (!shop.goodsList.length) {\r\n\t\t\t\t\t\tthis.list.splice(shopIndex, 1)\r\n\t\t\t\t\t\tthis.removeShop()\r\n\t\t\t\t\t} //删除店铺\r\n\t\t\t\t\tthis.removePopup = false\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tlet ids = []\r\n\t\t\t\tthis.removeLists.forEach(goods=> {\r\n\t\t\t\t\tids.push(goods.id)\r\n\t\t\t\t})\r\n\t\t\t\taxios.post(url.cartMremove, {ids})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.removeLists.forEach(goods => {\r\n\t\t\t\t\t\tlet index = this.editingShop.goodsList.findIndex(item => {\r\n\t\t\t\t\t\t\treturn item.id === goods.id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.editingShop.goodsList.splice(index, 1)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (!this.editingShop.goodsList.length) {\r\n\t\t\t\t\t\tthis.list.splice(this.editingShopIndex, 1)\r\n\t\t\t\t\t\tthis.removeShop()\r\n\t\t\t\t\t} //删除店铺\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.removePopup = false\r\n\t\t},\r\n\t\tremoveShop() {\r\n\t\t\tthis.editingShop = null\r\n\t\t\tthis.editingShopIndex = -1\r\n\t\t\tthis.lists.forEach(shop => {\r\n\t\t\t\tshop.editing = false\r\n\t\t\t\tshop.editingMsg = '编辑'\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t},\r\n\tmixins: [mixin]\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js"],"sourceRoot":""}